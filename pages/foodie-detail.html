<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />

    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"
      rel="stylesheet"
    />
    <title>åƒè²¨å°ˆå€-å…§é </title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  </head>
  <body>
    <div class="phone">
      <div class="screen">
        <main class="main main-mb header-bar-mt">
          <!-- æ‰¾é£¯å‹ -->

          <section class="header-bar">
            <%- include('./layout/header'); -%>
            <section class="d-flex align-items-center py-2 mx-2 mb-4">
              <a class="ai-topbar-item" href="index.html"
                ><img
                  src="../assets/images/icon/arrow-left.svg"
                  alt="arrow-left.svg"
              /></a>

              <span class="t1b me-auto"></span>

              <a class="ai-topbar-item" href="#">
                <img
                  class="bookmark-btn"
                  src="../assets/images/icon/collect-btn-navbar.svg"
                  alt="bookmark_default.svg"
                />
              </a>
              <a class="ai-topbar-item" href="#">
                <span class="material-symbols-outlined">ios_share</span>
              </a>
            </section>
          </section>

          <!-- æ–‡ç« æ¨™é¡Œ & ä½œè€…è³‡è¨Š -->
          <div class="container">
            <div class="mb-3">
              <h2 class="t1b text-t500">éš±è—ç‰ˆç”œé»å¤©å ‚ï¼è‚‰æ¡‚æ²ä»¤äººæ‡·å¿µ</h2>
              <div class="d-flex align-items-center text-muted small mt-2">
                <img
                  src="../assets/images/èŠå¤©é ­è²¼.svg"
                  alt="ä½œè€…é ­åƒ"
                  class="rounded-circle me-2"
                  width="36"
                  height="36"
                />
                <div class="d-flex flex-column">
                  <span class="me-2 text-n500 t3">Ken</span>
                  <span class="t4 text-n300">æ˜¨å¤©00:13</span>
                </div>
              </div>
            </div>

            <!-- è²¼æ–‡åœ–ç‰‡ -->
            <div class="mb-3">
              <img
                src="../assets/images/foodie-detail/è²¼æ–‡ç…§ç‰‡.svg"
                alt="è‚‰æ¡‚æ²"
                class="img-fluid rounded-3 w-100"
              />
            </div>

            <!-- åº—å®¶è³‡è¨Š -->
            <div class="mb-3">
              <p class="mb-1">
                <span class="text-n300 t2b">åº—å®¶åç¨±</span>
                <span class="text-n500 t2">æ²æ²æ—¥å¸¸</span>

                <span>
                  <img
                    class="location"
                    src="../assets/images/icon/location.svg"
                  />
                </span>

                <span class="text-n300 t2">ä¸­å±±å€</span>
              </p>
              <div class="d-flex align-items-center">
                <span class="me-2 text-n300 t2b">æ¨è–¦æŒ‡æ•¸</span>
                <!-- æ˜Ÿæ˜Ÿè©•åˆ† -->
                <div class="d-flex align-items-center gap-1 star-rating">
                  <img
                    src="../assets/images/icon/mingcute_star-fill.svg"
                    alt=""
                    width="16"
                    height="16"
                  />
                  <img
                    src="../assets/images/icon/mingcute_star-line.svg"
                    alt=""
                    width="16"
                    height="16"
                  />
                  <img
                    src="../assets/images/icon/mingcute_star-line.svg"
                    alt=""
                    width="16"
                    height="16"
                  />
                  <img
                    src="../assets/images/icon/mingcute_star-line.svg"
                    alt=""
                    width="16"
                    height="16"
                  />
                  <img
                    src="../assets/images/icon/mingcute_star-line.svg"
                    alt=""
                    width="16"
                    height="16"
                  />
                </div>
              </div>
            </div>

            <!-- æ–‡ç« å…§å®¹ -->
            <div class="mb-4 t2 text-n500">
              <p>
                ä¸æ˜¯é–‹ç©ç¬‘ï¼Œé€™å®¶çš„è‚‰æ¡‚æ²ä¸€æ‰“é–‹å°±é¦™åˆ°è®“äººå¿˜è¨˜ç…©æƒ±ã€‚
                <br />
                è‚‰æ¡‚ï¼‹ç„¦ç³–ï¼‹å¥¶æ²¹çš„èåˆçœŸçš„å¤ªçŠ¯è¦ï¼Œ<br />
                æº«ç†±çš„æ™‚å€™å¤–é…¥å…§è»Ÿï¼Œé‚„æœ‰ä¸€é»é»ç‰½çµ²ï½åƒå®ŒçœŸçš„<br />
                æœƒæƒ³ç›´æ¥å†è²·ä¸€é¡†å›å®¶ï¼<br />
                é©åˆæ­é…ä¸€æ¯é»‘å’–å•¡æˆ–ç†±ç‰›å¥¶ï¼Œ<br />æ˜¯é‚£ç¨®åƒäº†æœƒç¬‘å‡ºä¾†çš„ç”œé»ï¼Œ<br />è®“äººç¬é–“é€²å…¥å†¬å­£æˆ€æ„›æ„ŸğŸ§£â˜•ï¸
              </p>
            </div>
            <hr class="yellow_line" />
            <!-- äº’å‹•æ•¸æ“šå€å¡Š -->
            <section
              class="d-flex align-items-center justify-content-between pt-3 pb-2 mb-3"
            >
              <!-- emoji + æ•¸å­— -->
              <div class="d-flex align-items-center">
                <span class="me-2">
                  <img
                    src="../assets/images/icon/Metrics.svg"
                    alt="Metrics.svg"
                  />
                </span>

                <span class="me-3">1565</span>
                <span class="me-2">
                  <img
                    src="../assets/images/icon/Messages.svg"
                    alt="Messages.svg"
                  />
                </span>

                <span class="me-3">123</span>
              </div>
            </section>

            <!-- ç•™è¨€å€ -->
            <div class="mb-4">
              <h2 class="t2b mb-2 text-t500">å…¨éƒ¨ç•™è¨€</h2>
              <!-- æ¨™ç±¤åˆ— -->
              <!-- <div class="d-flex align-items-center mb-3 border-bottom pb-2">
                <button class="btn btn-sm btn-outline-secondary border me-2">
                  æœ€æ–°ç•™è¨€
                </button>
                <button class="btn btn-sm btn-outline-secondary">ç†±é–€</button>
              </div> -->

              <div class="d-flex text-n500 t2 align-items-center mb-3 pb-2">
                <button class="comment-tab-btn active me-2">æœ€æ–°ç•™è¨€</button>
                <button class="comment-tab-btn">ç†±é–€</button>
              </div>

              <!-- å–®å‰‡ç•™è¨€ -->
              <div class="d-flex align-items-start mb-3">
                <img
                  src="../assets/images/foodie-detail/ç•™è¨€-01.svg"
                  alt="é ­åƒ"
                  class="rounded-circle me-2"
                />
                <div class="flex-grow-1">
                  <div class="d-flex justify-content-between">
                    <div class="d-flex flex-column">
                      <span class="text-n300 t5">ç±³å¥‡</span>
                      <span class="t4 text-n300">ä»Šå¤©09:30</span>
                    </div>

                    <!-- <a href="#" class="text-muted small">
                      <span class="material-symbols-outlined align-middle"
                        >favorite</span
                      >
                    </a> -->
                    <div
                      class="feedback-group chat-mb-lg d-flex align-items-center gap-1"
                    >
                      <img
                        class="feedback-active"
                        src="../assets/images/icon/feedback_active.svg"
                        alt="feedback_active.svg"
                      />
                      <img
                        class="feedback-default"
                        src="../assets/images/icon/feedback_default.svg"
                        alt="feedback_default.svg"
                        style="display: none"
                      />
                    </div>
                  </div>
                  <p class="mb-1 t3 text-muted text-n500">
                    ä¸Šæ¬¡è·¯éé€™é–“ç”œé»åº—è¢«å¸é€²ä¾†ï¼Œä¸‹ä¸€æ¬¡ä¹Ÿæƒ³åƒçœ‹çœ‹è€¶ï¼Œæœ‰æ²’æœ‰å…¶ä»–äººæƒ³ä¸€èµ·ï¼Ÿ
                  </p>
                </div>
              </div>

              <div class="d-flex align-items-start mb-3">
                <img
                  src="../assets/images/foodie-detail/ç•™è¨€-02.svg"
                  alt="é ­åƒ"
                  class="rounded-circle me-2"
                />
                <div class="flex-grow-1">
                  <div class="d-flex justify-content-between">
                    <div class="d-flex flex-column">
                      <span class="t5 text-n300">å¤è€ç¥ç§˜çš„å‚³èªª</span>
                      <span class="t4 text-n300"> ä»Šå¤©09:25 </span>
                    </div>

                    <div
                      class="feedback-group chat-mb-lg d-flex align-items-center gap-1"
                    >
                      <img
                        class="feedback-active"
                        src="../assets/images/icon/feedback_active.svg"
                        alt="feedback_active.svg"
                        style="display: none"
                      />
                      <img
                        class="feedback-default"
                        src="../assets/images/icon/feedback_default.svg"
                        alt="feedback_default.svg"
                      />
                    </div>
                  </div>
                  <p class="mb-1 t3 text-muted text-n500">å¥½æƒ³æ¨è–¦çµ¦æœ‹å‹ï½</p>
                </div>
              </div>
            </div>
          </div>

          <!-- æ–°å¢æŒ‰éˆ• -->
          <div class="fixed-rightdown">
            <a href="#" class="add">
              <span class="material-symbols-outlined text-p400">add</span>
            </a>
          </div>
        </main>

        <footer class="footer-ai rounded-top-3">
          <div class="footer-ai-container">
            <div class="d-flex align-items-center gap-2">
              <img
                src="../assets/images/icon/Head sticker.svg"
                alt="sticker.svg"
                width="36"
                height="36"
              />
              <div class="w-100 d-flex align-items-center">
                <input
                  id="aiInput"
                  type="text"
                  class="t1 col text-white bg-transparent border-0"
                  placeholder="ç•™è¨€....."
                />
                <img
                  id="default_statusBtn"
                  class="favrite"
                  src="../assets/images/icon/status=white.svg"
                  alt="favrite"
                />
                <img
                  id="active_statusBtn"
                  class="favrite"
                  src="../assets/images/icon/feedback_active.svg"
                  alt="feedback_active"
                />
                <img
                  id="sendBtn"
                  class="favrite"
                  src="../assets/images/icon/send.svg"
                  alt="send.svg"
                  style="display: none"
                />
              </div>
            </div>
          </div>
          <div class="light-bar-container">
            <div class="light-bar"></div>
          </div>
        </footer>
      </div>
    </div>

    <script type="module" src="../main.js"></script>
    <script>
      $(function () {
        // feedback-group å–®ä¸€ click ç”¨ toggle åˆ‡æ›å…©å¼µåœ–
        $(".feedback-group").on("click", function () {
          $(this).find(".feedback-active, .feedback-default").toggle();
        });

        // æ˜Ÿæ˜Ÿè©•åˆ†
        const starImgs = document.querySelectorAll(
          ".d-flex.align-items-center .star-rating img"
        );
        starImgs.forEach((star, idx) => {
          star.addEventListener("click", function () {
            starImgs.forEach((s, i) => {
              s.src =
                i <= idx
                  ? "../assets/images/icon/mingcute_star-fill.svg"
                  : "../assets/images/icon/mingcute_star-line.svg";
            });
          });
        });

        // footer è¼¸å…¥æ¬„ä½èˆ‡æŒ‰éˆ•åˆ‡æ›ï¼ˆäº’æ–¥è™•ç†ï¼‰
        const $input = $("#aiInput");
        const $defaultStatus = $("#default_statusBtn");
        const $activeStatus = $("#active_statusBtn");
        const $send = $("#sendBtn");

        // ç‹€æ…‹è®Šæ•¸ï¼šæ˜¯å¦å·²æŒ‰æ„›å¿ƒï¼ˆæ”¶è—/æŒ‰è®šï¼‰
        let isFavorited = false;

        function renderFooterIcons() {
          const hasText = $.trim($input.val()).length > 0;

          // æœ‰æ–‡å­—æ™‚åªé¡¯ç¤º sendï¼ˆå…¶ä»–ç‹€æ…‹éš±è—ï¼‰
          if (hasText) {
            $send.show();
            $defaultStatus.hide();
            $activeStatus.hide();
            return;
          }

          // ç„¡æ–‡å­—æ™‚ï¼Œä¾ isFavorited é¡¯ç¤ºå…¶ä¸­ä¸€å€‹ iconï¼ˆç¢ºä¿ä¸æœƒåŒæ™‚é¡¯ç¤ºï¼‰
          $send.hide();
          if (isFavorited) {
            $activeStatus.show();
            $defaultStatus.hide();
          } else {
            $defaultStatus.show();
            $activeStatus.hide();
          }
        }

        // åˆå§‹é¡¯ç¤ºè¨­å®šï¼ˆç¢ºä¿å…©å€‹æ„›å¿ƒä¸æœƒåŒæ™‚é¡¯ç¤ºï¼‰
        isFavorited = false; // é è¨­æœªæŒ‰æ„›å¿ƒ
        renderFooterIcons();

        // è¼¸å…¥ç›£è½ï¼šå‹•æ…‹é¡¯ç¤º send æˆ–ç‹€æ…‹åœ–ç¤º
        $input.on("input", function () {
          renderFooterIcons();
        });

        // é»æ“Š status åœ–ç¤ºäº’ç›¸åˆ‡æ›ï¼ˆæ”¹è®Šç‹€æ…‹è®Šæ•¸ä¸¦é‡æ–° renderï¼‰
        $defaultStatus.on("click", function () {
          // åªæœ‰åœ¨æ²’æœ‰è¼¸å…¥æ–‡å­—æ™‚æ‰è™•ç†
          if ($.trim($input.val()).length === 0) {
            isFavorited = true;
            renderFooterIcons();
          }
        });
        $activeStatus.on("click", function () {
          if ($.trim($input.val()).length === 0) {
            isFavorited = false;
            renderFooterIcons();
          }
        });

        // send æŒ‰éˆ•è¡Œç‚ºï¼šé€å‡ºã€æ¸…ç©ºä¸¦é‚„åŸ
        $send.on("click", function () {
          const val = $.trim($input.val());
          if (!val) return;
          // ç¯„ä¾‹ï¼šç”¨ alert æˆ– toast é¡¯ç¤ºæˆåŠŸ
          alert("å·²é€å‡ºç•™è¨€ï¼š" + val);
          $input.val("");
          renderFooterIcons();
        });
      });
    </script>
  </body>
</html>
